noble_auto_marry_config_menu = {
	type = situation

	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7

	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = {data = name}
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.63
			}
		}
	}
}

noble_auto_marry_message_settings = {
	type = situation

	ai_tick = daily
	ai_tick_frequency = 120
	automation_tick = daily
	automation_tick_frequency = 7

	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = {data = name}
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?= {
			if = {
				limit = {
					has_variable = hide_marriage_events
				}
				remove_variable = hide_marriage_events
			}
			else = {
				set_variable = hide_marriage_events
			}
		}
	}
}

noble_auto_marry_set_pop_limit = {
	type = situation

	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7

	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.67
			}
		}
	}
}

noble_auto_marry_set_eligibility = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 120
	automation_tick = daily
	automation_tick_frequency = 7

	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}
	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.68
			}
		}
	}
}

noble_auto_marry_non_noble_marriages = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}



	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.69
			}
		}
	}
}

noble_auto_marry_disable_auto_marry = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			if = {
				limit = {
					has_variable = noble_auto_marry_temp_disable
				}
				remove_variable = noble_auto_marry_temp_disable
			}
			else = {
				set_variable = noble_auto_marry_temp_disable
			}
		}
	}
}

noble_auto_marry_toggle_auto_marry_menu_for_ai = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.87
			}
		}
	}
}

noble_auto_marry_toggle_auto_marry_for_ai = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		if = {
			limit = {
				has_global_variable = noble_auto_marry_enable_for_ai
			}
			remove_global_variable = noble_auto_marry_enable_for_ai
		}
		else = {
			set_global_variable = noble_auto_marry_enable_for_ai
		}
	}
}

noble_auto_marry_pop_limit_for_ai_action = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
		has_global_variable = noble_auto_marry_enable_for_ai
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		scope:actor ?={
			trigger_event_silently = {
				id = noble_auto_marry.72
			}
		}
	}
}
noble_auto_marry_non_noble_auto_marry_for_ai = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
		has_global_variable = noble_auto_marry_enable_for_ai
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		if = {
			limit = {
				has_global_variable = non_noble_auto_marry_enable_for_ai
			}
			remove_global_variable = non_noble_auto_marry_enable_for_ai
		}
		else = {
			set_global_variable = non_noble_auto_marry_enable_for_ai
		}
	}
}
noble_auto_marry_disable_config_menu = {
	type = situation
	ai_tick = daily
	ai_tick_frequency = 40
	automation_tick = daily
	automation_tick_frequency = 7


	potential = {
		scope:actor ?= {
			is_ai = no
		}
	}

	select_trigger = {
		looking_for_a = situation
		target_flag = recipient
		name = "choose_situation"
		column = { data = name }
		visible = {
			situation:noble_auto_marry_config = this
			situation_is_active = yes
		}
	}

	effect = {
		set_variable = noble_auto_marry_i_have_made_my_bed_and_will_lay_in_it
		end_situation = situation:noble_auto_marry_config
	}
}