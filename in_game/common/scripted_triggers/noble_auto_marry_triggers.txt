# We can scope everything through the men here to save some time, and allow for a bit more flexiblity with the matches.
noble_valid_for_auto_marry_unrestricted = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	any_character = {
		is_married = no
		is_female = no
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
	}
	any_character = {
		is_married = no
		is_female = yes
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		age_in_years > 18
		age_in_years < 25
	}

}

noble_valid_for_auto_marry_selective = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	any_character = {
		is_married = no
		is_female = no
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
	any_character = {
		is_married = no
		is_female = yes
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		age_in_years > 18
		age_in_years < 25
	}
}

noble_valid_for_auto_marry_dynastic_preservation = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	any_character = {
		is_married = no
		is_female = no
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		this.dynasty = {
			any_character_in_dynasty = {
				count < 3
				is_female = no  # As they won't carry on a dynasty
				age_in_years > 16
				age_in_years < 50
				is_married = yes
			}
		}
	}
	any_character = {
		is_married = no
		is_female = yes
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		age_in_years > 18
		age_in_years < 25
	}
}

burgher_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_burgher_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:burghers_estate 
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}

clergy_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_clergy_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:clergy_estate 
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}


peasants_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_peasant_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:peasants_estate  
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}

dhimmi_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_dhimmi_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:dhimmi_estate   
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}
tribes_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_tribes_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:tribes_estate    
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}

cossacks_valid_for_auto_marry = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_variable = nobles_auto_marry_cossack_marriages
	any_character = {
		is_married = no
		is_female = no
		has_estate = estate_type:cossacks_estate     
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
}

noble_valid_for_auto_marry_dynastic_preservation_for_ai = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_global_variable = noble_auto_marry_enable_for_ai
	any_character = {
		is_married = no
		is_female = no
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		this.dynasty = {
			any_character_in_dynasty = {
				count < 3
				is_female = no  # As they won't carry on a dynasty
				age_in_years > 16
				age_in_years < 50
				is_married = yes
			}
		}
	}
	any_character = {
		is_married = no
		is_female = yes
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		age_in_years > 18
		age_in_years < 25
	}
}
non_noble_valid_for_auto_marry_for_ai = {
	NOT = { has_variable = noble_auto_marry_temp_disable }
	has_global_variable = noble_auto_marry_enable_for_ai
	has_global_variable = non_noble_auto_marry_enable_for_ai
	any_character = {
		is_married = no
		is_female = no
		NOT = {
			OR = {
				has_estate = estate_type:nobles_estate 
				has_estate = estate_type:crown_estate 
			}
		}
		is_mercenary_leader = no
		age_in_years > 18
		age_in_years < 25
		any_close_relative = {
			count < 3
			is_female = no  # As they won't carry on a dynasty
			age_in_years > 16
			age_in_years < 50
			is_married = yes
		}
	}
	any_character = {
		is_married = no
		is_female = yes
		OR = {
			has_estate = estate_type:nobles_estate 
			AND = {
				has_estate = estate_type:crown_estate 
				is_eligible_for_royal_marriage = no
			}
		}
		age_in_years > 18
		age_in_years < 25
	}
}